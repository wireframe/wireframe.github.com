---
layout: post
title: "New Maven Webstart Plugin"
date: 2007-12-27
comments: false
categories:
 - swing
 - maven
---

<div class='post'>
<p>After <a href="http://www.jroller.com/wireframe/entry/shard_cyclops_demo_available">uncovering the horrible state of affairs for Java Webstart developers</a>, I spent some time trying to figure out where to go next.  The current <a href="http://mojo.codehaus.org/webstart-maven-plugin-parent/webstart-maven-plugin/">codehaus plugin for webstart projects</a> just doesn't cut it.</p><br /><br /><p>I was <i>appalled</i> that the default behavior of the plugin forced developers to manually create a JNLP file and all the plugin did was sign jar files and zip up the contents for you.  After a few <i>long</i> discussions with the developers of the plugin, <a href="http://jira.codehaus.org/browse/MWEBSTART-86">I commented that</a> "It would greatly improve the adoption of this plugin if it supports very simple out of the box behavior".</p><br /><br /><p>The response I was a bit surprising, "Not sure if that will improve the adoption of the plugin (<b>what are the alternatives</b>?)"</p><br /><br /><p>This got me thinking...What are the alternatives?  This is <i>exactly</i> what's going wrong with the maven community.  There <b>are</b> no alternatives!  </p><br /><br /><p>I spent the next two days hacking away at the current crappy maven plugin trying to contribute back improvements before thinking to myself, should it really be this hard?  Can't we provide drop dead simple support for 90% of webstart projects without jumping through all of these hoops?  The current plugin is a mis-mash of partially implemented features and no clear usecase for how/when it should be used.  The code is nearly unreadable and 100% untestable.  Yuk...</p><br /><br /><p>So, I took a couple hours and whipped together a new maven webstart plugin that <b>blows the pants</b> off the current plugin.  It handles the simple usecase with utmost ease and does so with less code and complexity.  Less than 300 lines of code!</p><br /><br /><p>If you <i>need</i> complete flexability and control, use the codehaus plugin.  If you want your project to "just work", use mine.  =)</p><br /><br /><p>The simple usecase is (you guessed it), very simple:</p><br /><pre><br />  &lt;build&gt;<br />    &lt;plugins&gt;<br />      &lt;plugin&gt;<br />        &lt;groupId&gt;com.codecrate&lt;/groupId&gt;<br />        &lt;artifactId&gt;webstart-maven-plugin&lt;/artifactId&gt;<br />        &lt;executions&gt;<br />          &lt;execution&gt;<br />            &lt;phase&gt;package&lt;/phase&gt;<br />            &lt;goals&gt;<br />              &lt;goal&gt;generate-jnlp&lt;/goal&gt;<br />             &lt;/goals&gt;<br />          &lt;/execution&gt;<br />        &lt;/executions&gt;<br />        &lt;configuration&gt;<br />          &lt;mainClass&gt;com.mysite.MyApp&lt;/mainClass&gt;<br />          &lt;allPermissions&gt;false&lt;/allPermissions&gt;<br />        &lt;/configuration&gt;<br />      &lt;/plugin&gt;<br />    &lt;/plugins&gt;<br />  &lt;/build&gt;<br /></pre><br /><br /><p>Now, if your application needs allPermissions, you just need to add information about what keystore to use for signing your jars.  I'd recommend checking out the <a href="http://mojo.codehaus.org/keytool-maven-plugin/">maven keytools plugin</a> as well for helping setup and maintain your keystore.</p><br /><pre><br />      &lt;plugin&gt;<br />        &lt;groupId&gt;com.codecrate&lt;/groupId&gt;<br />        &lt;artifactId&gt;webstart-maven-plugin&lt;/artifactId&gt;<br />        &lt;executions&gt;<br />          &lt;execution&gt;<br />            &lt;phase&gt;package&lt;/phase&gt;<br />            &lt;goals&gt;<br />              &lt;goal&gt;generate-jnlp&lt;/goal&gt;<br />             &lt;/goals&gt;<br />          &lt;/execution&gt;<br />        &lt;/executions&gt;<br />        &lt;configuration&gt;<br />          &lt;mainClass&gt;com.mysite.MyApp&lt;/mainClass&gt;<br />          <br />          &lt;keystore&gt;${project.basedir}/src/main/webstart/keystore&lt;/keystore&gt;<br />          &lt;keypass&gt;shard-rox&lt;/keypass&gt;<br />          &lt;storepass&gt;shard-rox&lt;/storepass&gt;<br />          &lt;alias&gt;shard&lt;/alias&gt;<br />        &lt;/configuration&gt;<br />      &lt;/plugin&gt;<br /></pre><br /><br /><p>Pretty much every part of the JNLP file is customizable through this plugin, but the key is that there are sensible defaults so you shouldn't need to tweak anything else.  But if you need to, here are some of the available switches:</p><br /><table><br />  <tr><br />  <th>Parameter</th><br />  <th>Description</th><br />  <th>Default Value</th><br />  </tr><br />  <tr><br />  <td>title</td><br />  <td>Name of application</td><br />  <td>project.name</td><br />  </tr><br />  <tr><br />  <td>description</td><br />  <td>Description displayed when launching application</td><br />  <td>project.description</td><br />  </tr><br />  <tr><br />  <td>homepage</td><br />  <td>URL for the project homepage</td><br />  <td>project.url</td><br />  </tr><br />  <tr><br />  <td>vendor</td><br />  <td>Company publishing the application</td><br />  <td>project.organization.name</td><br />  </tr><br />  <tr><br />  <td>codebase</td><br />  <td>Base URL for JNLP resources</td><br />  <td>project.url</td><br />  </tr><br />  <tr><br />  <td>jnlpFile</td><br />  <td>Filename of the generated JNLP file</td><br />  <td>launch.jnlp</td><br />  </tr><br />  <tr><br />  <td>spec</td><br />  <td>JNLP spec version</td><br />  <td>1.0+</td><br />  </tr><br />  <tr><br />  <td>offlineAllowed</td><br />  <td>Configure whether the application can be run offline</td><br />  <td>false</td><br />  </tr><br />  <tr><br />  <td>j2seVersion</td><br />  <td>Version of Java required to run the application</td><br />  <td>1.5+</td><br />  </tr><br /></table><br /><br /><p>You'll also need to add the codecrate repository to have access to the plugin:</p><br /><pre><br />  &lt;repositories&gt;<br />    &lt;repository&gt;<br />      &lt;id&gt;codecrate-repository&lt;/id&gt;<br />      &lt;name&gt;Codecrate Repository&lt;/name&gt;<br />      &lt;url&gt;http://maven.codecrate.com/&lt;/url&gt;<br />    &lt;/repository&gt;<br />  &lt;/repositories&gt;<br /></pre></div>
