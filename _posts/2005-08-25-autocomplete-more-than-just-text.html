---
layout: post
title: "Autocomplete More Than Just Text"
date: 2005-08-25
comments: false
categories:
 - javascript
 - java
 - scriptaculous
 - wicket
 - ajax
---

<div class='post'>
<p>If you run the <a href="http://script.aculo.us/demos/ajax/autocompleter_customized">scriptaculous autocomplete demo</a> you'll notice that one of the coolest features is that the results are not just plain text.  They display a thumbnail image along with two pieces of text in a great looking layout.  You might not realize it, but the current Wicket AutocompleteTextField in wicket-stuff already supports this behavior.</p><br /><br /><p>Now, you might be thinking, <i>"That's crazy?  How can this be when the API only returns a String?"</i></p><br /><pre><br />    protected abstract String[] getResults(String input);<br /></pre><br /><br /><p>Well, why not just return an HTML formatted string?  Here's some example code:</p><br /><pre><br />public AdvancedAutocompleteExampleForm(String id) {<br />    super(id);<br />    add(new AutocompleteTextField("emailAddress") {<br />        public String[] getResults(String input) {<br />	    return new String[] {<br />	        buildAutoCompleteContent("bill.gif", "Bill Gates", "bill.gates@microsoft.com")<br />		, buildAutoCompleteContent("ryan.gif", "Ryan Sonnek", "ryansonnek@notvalid.com")<br />            };<br />        }<br />    });<br />}<br /><br />private String buildAutoCompleteContent(String image, String name, String emailAddress) {<br />	StringBuffer content = new StringBuffer();<br />	content.append("&lt;div class=\"imageContent\"&gt;");<br />	content.append("&lt;img src=\"" + image + "\" alt=\"" + name + "\"/&gt;");<br />	content.append("&lt;/div&gt;");<br />	content.append("&lt;div class=\"nameContent\"&gt;");<br />	content.append(name);<br />	content.append("&lt;/div&gt;");<br />	content.append("&lt;div class=\"informal\"&gt;");<br />	content.append(emailAddress);<br />	content.append("&lt;/div&gt;");<br /><br />        return content.toString();<br />}<br /><br /></pre><br /><br /><p>Yep, that's it.  Now in order for it to look good, you'll have to attach some custom style sheet similar to scriptaculous.</p><br /><pre><br />public final void printHeadInitContribution(HtmlHeaderContainer container) {<br />	container.getResponse().write(<br />    	"&lt;style type=\"text/css\"&gt;\n" +<br />    	"	li.contact div.imageContent {\n" +<br />    	"	  float:left;\n" +<br />    	"	  width:32px;\n" +<br />    	"	  height:32px;\n" +<br />    	"	  margin-right:8px;\n" +<br />    	"	}\n" +<br />    	"	li.contact div.nameContent {\n" +<br />    	"	  font-weight:bold;\n" +<br />    	"	  font-size:12px;\n" +<br />    	"	  line-height:1.2em;\n" +<br />    	"	}\n" +<br />    	"	li.contact div.informal {\n" +<br />    	"	  font-size:10px;\n" +<br />    	"	  color:#888;\n" +<br />    	"	}\n" +<br />        "&lt;/style&gt;\n");<br />}<br /></pre><br /><br /><p>Now for a bit more of scriptalicious magic.  You might be wondering how the autocomplete text box figures out what text to use when a user selects the text from the drop down.  After all, there are two separate <i>text chunks</i> to choose from.  This is where the <b>informal</b> class name comes into play.  When the user selects an auto complete entry, all informal chunks are ignored.  This means that there should only be one piece of text content that is <i>not</i> informal.  </p><br /><br /><p>I have committed this <a href="http://cvs.sourceforge.net/viewcvs.py/wicket-stuff/wicket-contrib-prototype-examples/">example example into wicket-stuff</a> for anyone to use and to keep up to date with the ever changing AutocompleteTextField API.</p></div>
