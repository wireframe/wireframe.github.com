---
layout: post
title: "Testing Managed Objects"
date: 2008-05-05
comments: false
categories:
 - java
 - testing
---

<div class='post'>
<p><i>My</i> definition of "Managed" Objects:<br /><br />Objects that are manipulated by a separate container with a pre-defined lifecycle.</p><br /><br /><p>Managed Objects are a very standard part of development projects. </p><br /><ul><br />  <li>JSP taglibs are managed by the servlet container</li><br /><li>ant/maven tasks are managed by their respective execution environment</li><br /><li>tapestry/wicket components have a managed rendering lifecycle<br /></ul><br /><br /><br /><p>Unit testing these managed objects "correctly" is <b>very</b> difficult since you need in depth knowledge of how these objects will be invoked within the container.  In my personal experience, it is best to extract as much logic out of your managed objects into standard POJO's and unit test the heck out of them. The managed objects then become a very slim wrapper around your core business objects.  Unit testing your POJO gives you the most bang for your buck versus actually unit testing the managed object.</p><br /><br /><p>To actually unit test your managed objects, it is very important to test them within the actual container.  This may qualify as more of an integration test instead of a standard unit test, but that's fine by me.  The alternative is to write your unit test to invoke the managed object by emulating the behavior of the container.  I have never had a high level of confidence that my "emulated container" is doing things 100% the way the "real container" will.  Especially since containers do not necessarily adhere to the published lifecycle specification *cough* every JSP servlet container *cough*.  Since one of the core purposes for unit tests is to remove fear of making changes, these integration tests are vital to ensure your object really works as you expect.</p><br /><br /><p>Some libraries provide lightweight stubs of their container in order to facilitate these kinds of integration tests.  Spring has a whole suite of <a href="http://www.infoq.com/articles/testing-in-spring">abstract JUnit TestCase classes</a> to make in-container testing a breeze.  Wicket provides an excellent <a href="">WicketTester class</a> to stub out the wicket runtime to execute your managed object in isolation without firing up an entire application.  Maven has a <a href="http://maven.apache.org/plugin-developers/plugin-testing.html">few competing options</a> and they all suck pretty bad (but at least they're trying).  Anyone here remember the supposed <a href="http://jakarta.apache.org/cactus/">"holy grail" of in-container testing</a>?  Wow, that brings back bad memories...</p><br /><br /></div>
