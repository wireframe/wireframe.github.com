---
layout: post
title: "New Relic + Backgrounded + Resque = Awesome"
date: 2010-10-14
comments: false
categories:
 - ruby
 - performance
 - backgrounded
 - resque
---

<div class='post'>
If you're writing a rails app, you're already using new relic to monitor your app right?  Wouldn't it be great to get the same performance monitoring of your Backgrounded operations as well?  <br /><br />Fork it up, now you can!<br /><br />I've published a fork of the rpm_contrib gem that will automatically instrument and monitor your Backgrounded operations with absolutely <strong>no</strong> code changes!  That's right, all you need to do is include the wireframe-rpm_contrib gem and your Backgrounded Resque tasks will automatically be tracked!<br /><br />Sourcecode available on github (fork of <a href="http://github.com/newrelic/rpm_contrib">rpm_contrib</a>):<br /><a href="http://github.com/wireframe/rpm_contrib">http://github.com/wireframe/rpm_contrib</a><br /><br />Gem available on gemcutter:<br /><a href="https://rubygems.org/gems/wireframe-rpm_contrib">https://rubygems.org/gems/wireframe-rpm_contrib</a><br /><br />The default rpm_contrib gem adds instrumentation for Resque jobs, but is not aware of Backgrounded jobs so all of the jobs were recorded as Backgrounded::Handler::ResqueHandler#perform.  My little patch fixes that so that Backgrounded Resque jobs have the correct classname/method context.</div>
