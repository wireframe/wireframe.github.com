---
layout: post
title: "Just Push It"
date: 2006-12-01
comments: false
categories:
 - java
 - design
---

<div class='post'>
<p>Holiday time has come again, and my time available for blogging has shrunk to almost none.  This little post continues my series of simple development tips, and builds on a <a href="http://jroller.com/page/wireframe/?anchor=document_code_with_units_of">related post from a while back</a>.</p><br /><br /><p>There are times when I run across a procedural block of code and can not for the life of me figure out what's going on.  Most of my time is spent trying to understand what the code is <i>really</i> intended to do.  For example, here's a little chunk of code that has a bit of an identity crisis.  What <i>exactly</i> is it trying to do?  Why isn't it more evident what it's purpose is just by reading the code?</p><br /><br /><pre><br />public class MyService &#123;<br />  public void sendReminderEmails() &#123;<br />    Collection users = userDao.findUsers();<br />    for (Iterator iter = users.iterator(); iter.hasNext(); ;) &#123;<br />      User user = (User) iter.next();<br />      if (user.isActive()) &#123;<br />        user.sendReminderEmail();<br />      &#125;<br />    &#125;<br />  &#125;<br />&#125;<br /></pre><br /><br /><p>This is a mighty simple example, but notice how cluttered the code is with logic unrelated to it's <i>core purpose</i>?  Now, there are a <i>number</i> of ways to improve this code, and <strong>Pushing Logic </strong>is a simple step towards improvement.</p><br /><br /><p>Pushing logic is a simple refactoring trick that helps make code more maintainable and understandable.  The idea is that if some piece of code isn't relevant to your current action, it should be pushed <i>Somewhere Else</i>.  That magical <i>Somewhere Else</i> can be another class, or a private method of the existing class.  The important thing is to get that code out of the way.</p><br /><br /><p>From my previous example, a simple change I could make is to try and remove the check for if the user is active.  It's a small thing, but it would be nice to assume all the users are active right?  So, I'll <i>Push</i> that logic into a new method on the <code>UserDao</code> and rely on it to do the correct logic.</p><br /><br /><p>Now, my service is a bit cleaner and removes that extra branching logic.</p><br /><br /><pre><br />public class MyService &#123;<br />  public void sendReminderEmails() &#123;<br />    Collection users = userDao.findActiveUsers();<br />    for (Iterator iter = users.iterator(); iter.hasNext(); ;) &#123;<br />      User user = (User) iter.next();<br />      user.sendReminderEmail();<br />    &#125;<br />  &#125;<br />&#125;<br /></pre><br /><br /><p>The beauty of this refactoring tip is that it can be applied to any layer of an application.  If your business layer begins pushing logic into the dao layer and that code begins to be bloated, you should push that logic out of the dao layer and into a new abstraction to keep that code concise.</p><br /><br /><!-- technorati tags begin --><br /><p style="font-size:10px;text-align:right;">technorati tags:<a href="http://technorati.com/tag/java" rel="tag">java</a>, <a href="http://technorati.com/tag/development" rel="tag">development</a></p><br /><!-- technorati tags end --></div>
