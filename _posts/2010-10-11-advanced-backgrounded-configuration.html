---
layout: post
title: "Advanced Backgrounded Configuration"
date: 2010-10-11
comments: false
categories:
 - ruby
 - backgrounded
 - resque
---

<div class='post'>
<img width="500px" src="http://fc07.deviantart.net/fs25/i/2008/076/6/0/Mr_Sparkle_by_GoSco.png" /><br /><h3>Mr. Sparkle says, "Wow!  Backgrounded is super terrific!" (loose translation)</h3><br />In the wake of the backgrounded ruby gem release, only two complaints have been raised about the library...<br /><br />First: the backgrounded API is just too damn intuitive.  It is literally so beautiful that every other background processing API feels like a giant turd.  Using backgrounded abstracts implementation details between various frameworks so developers can focus on writing kick ass apps.  Sorry folks, but I have no intention of fixing this issue.  :)<br /><br />Second: The elegance and simplicity of the backgrounded abstraction has proven too limiting for developers that need greater control 'under the hood'.  The 0.6.0 release of backgrounded should satisfy these power hungary devs by supporting an optional configuration hash for each backgrounded method.  Any options specified in your backgrounded class will be passed through to tweak the specific background processing handler in use.<br /><br />The first backgrounded handler to honor the optional configuration is the <a href="http://blog.codecrate.com/2010/09/backgrounded-resque-support.html">Resque integration</a> which now supports configuration of the particular queue the backgrounded method will be run in.  The default behavior is to run all backgrounded methods in a single default queue (named backgrounded) and this can be overridden by passing in the optional :queue name for any backgrounded method.<br /><br />It is vitally important that the introduction of these advanced configuration options not break the existing API.  The beauty and simplicity of the original backgrounded API is still very much intact and all existing clients will continue with the default behavior with no change. Here's an example to show how the original backgrounded methods can be configured right alongside with advanced backgrounded methods.<br /><br /><pre>class Blog<br />  backgrounded save_to_filesystem, :email_followers =&gt; &#123;:queue =&gt; :low&#125;<br /><br />  def email_followers<br />  end<br />  def save_to_filesystem<br />  end<br />end<br /></pre><br />Sourcecode on Github.<br /><a href="http://github.com/wireframe/backgrounded">http://github.com/wireframe/backgrounded</a><br /><br />Latest gem on Gemcutter.<br /><a href="https://rubygems.org/gems/backgrounded">https://rubygems.org/gems/backgrounded</a></div>
