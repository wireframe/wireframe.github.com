---
layout: post
title: "Integrate JTaskPane With Spring-RCP"
date: 2006-01-29
comments: false
categories:
 - java
 - spring
 - springrcp
---

<div class='post'>
<p>After my <a href="http://jroller.com/page/wireframe/?anchor=contextual_tasks">previous endevour integrating contextual tasks into shard</a>, I wanted to take a step back and see if there was room for improvement.</p><br /><br /><p>One glaring issue with my original implementation was that it was very "un-spring like".  I built my context page by hand and I wasn't able to use the helper objects that Spring-RCP exposes to generate UI specific command objects like button groups, menu objects or popups.  For example:</p><br /><pre class="code"><br />CommandGroup group = getWindowCommandManager().getCommandGroup("popUp");<br />group.createPopupMenu();<br /></pre><br /><br /><p>I wanted to build my context pane in the same way so that I could add/remove actions to the context pane without changing my Java code.  I also wanted to enhance spring-rcp to add a new "helper" method to build the task pane for me.  Something along the lines of:</p><br /><pre class="code"><br />CommandGroup group = getWindowCommandManager().getCommandGroup("contextTasks");<br />group.createTaskPane();<br /></pre><br /><br /><p>Trying to accomplish this enhancement was not <i>nearly</i> as easy as I expected.  It was extremely difficult to inject this behavior into spring-rcp, and the implementation is not for the faint of heart.  =) It's unfortunate that the behavior to generate these swing components is so coupled to the implementation.  It would be better if the <code>CommandGroup</code> registered different handlers for what Swing components it could generate.  That would allow for easier extension of what Swing components spring-rcp supported.  A new API could be created that might look something like:   </p><br /><pre class="code"><br />CommandGroup group = getWindowCommandManager().getCommandGroup("contextTasks");<br />group.createSwingComponent(JMenuBar.class);<br /></pre><br /><br /><p>I won't go into the hairy details of how I got it all to work right now.  If anyone is interested, you can checkout the code from <a href="http://shard.codecrate.com">shard</a>, or drop me a line and I'd be glad to go over it with you.  After all of my work was done, here's all that's needed now to build a fully configurable task pane that's wired from spring-rcp!</p><br /><b>command-context.xml</b><br /><pre class="code"><br />&lt;bean id="contextTasks"<br />    class="com.codecrate.shard.ui.command.task.TaskPaneFactoryBean"&gt;<br />    &lt;property name="members"&gt;<br />        &lt;list&gt;<br />            &lt;ref bean="commonTasks" /&gt;<br />        &lt;/list&gt;<br />    &lt;/property&gt;<br />&lt;/bean&gt;<br /><br />&lt;bean id="commonTasks"<br />    class="com.codecrate.shard.ui.command.task.TaskPaneGroupFactoryBean"&gt;<br />    &lt;property name="members"&gt;<br />        &lt;list&gt;<br />            &lt;value&gt;newCommand&lt;/value&gt;<br />        &lt;/list&gt;<br />    &lt;/property&gt;<br />&lt;/bean&gt;<br /></pre><br /><b>MyObjectView.java</b><br /><pre class="code"><br />TaskPaneCommandGroup tasks = (TaskPaneCommandGroup) getWindowCommandManager().getCommandGroup("contextTasks");<br />tasks.createTaskPane();<br /></pre><br /><br /><p>I wonder if other spring-rcp users have built similar extensions?  I don't think this code could be pushed into spring-rcp since they shy away from including widgets into the core framework, but maybe this code should be hosted somewhere else?  Seems kindof similar to the <a href="https://jide-springrcp.dev.java.net/">Spring-RCP/Flexdock integration project</a>.</p><br /><br /><!-- technorati tags begin --><br /><p style="font-size:10px;text-align:right;">technorati tags: <a href="http://technorati.com/tag/java" rel="tag">java</a>, <a href="http://technorati.com/tag/swing" rel="tag">swing</a>, <a href="http://technorati.com/tag/spring" rel="tag">spring</a>, <a href="http://technorati.com/tag/rcp" rel="tag">rcp</a>, <a href="http://technorati.com/tag/shard" rel="tag">shard</a></p><br /><!-- technorati tags end --></div>
