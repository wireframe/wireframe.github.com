---
layout: post
title: "FinderTemplate"
date: 2006-08-07
comments: false
categories:
 - ruby
 - java
---

<div class='post'>
<p>I think I'm becoming addicted to Ruby syntax.  The Ruby collection API is super slick, and since I've already brought <a href="http://jroller.com/page/wireframe?entry=humane_object_iteration">a Ruby-like iteration syntax to Java</a>, I think it's logical to try and port <a href="http://www.rubycentral.com/ref/ref_m_enumerable.html#find">the Ruby find syntax</a> to Java as well.</p><br /><br /><p>My goal is to create a simple client API for looping through a collection, looking for a certain object.  Here's how I want it to work.</p><br /><br /><pre><br />MyObject foundObject = (MyObject) new FinderTemplate(entries) {<br />  protected boolean isMatch(Object object) {<br />    MyObject entry = (MyObject) object;<br /><br />    //perform any required matching logic<br />    return true;<br />  }<br />}.find();<br /></pre><br /><br /><br /><p>The code for the <code>FinderTemplate</code> is very similar to my previous <code>IteratorTemplate</code>.  Nothing too fancy, but it's pretty slick.</p><br /><br /><pre><br />public abstract class FinderTemplate {<br /><br />  private final Collection objects;<br /><br />  public FinderTemplate(Collection objects) {<br />    this.objects = objects;<br />  }<br /><br />  public Object find() {<br />    for (Iterator iter = objects.iterator(); iter.hasNext();) {<br />      Object element = (Object) iter.next();<br />        if (isMatch(element)) {<br />          return element;<br />        }<br />      }<br />    return null;<br />  }<br /><br />  protected abstract boolean isMatch(Object object);<br />}<br /></pre><br /><br /><p>What I think is very cool is how this <code>FinderTemplate</code> can be extended ever so slightly to add a <code>findAll</code> method.  So, instead of just finding <em>one</em> object, you can find <em>all</em> objects that meet your criteria. </p><br /><br /><p>Here's the only change needed to the <code>FinderTemplate</code> to add this new behaviour.</p><br /><pre><br />  public Collection findAll() {<br />    Collection results = new ArrayList();<br />    for (Iterator iter = objects.iterator(); iter.hasNext();) {<br />      Object element = (Object) iter.next();<br />        if (isMatch(element)) {<br />          results.add(element);<br />        }<br />      }<br />    return results;<br />  }<br /></pre><br /><br /><p>I think it would be great if this code could find a home somewhere like <a href="http://jakarta.apache.org/commons/collections/">commons-collections</a>.  I'm not sure if there's much interest for this code though, unless you've been exposed to Ruby.</p><br /><br /><!-- technorati tags begin --><br /><p style="font-size: 10px; text-align: right;">technorati tags: <br /><a href="http://technorati.com/tag/java" rel="tag">java</a>, <br /><a href="http://technorati.com/tag/ruby" rel="tag">ruby</a><br /></p><br /><!-- technorati tags end --></div>
