---
layout: post
title: "Spring Rich Client Browser Launcher"
date: 2006-09-15
comments: false
categories:
 - java
 - spring
 - springrcp
---

<div class='post'>
<p>I've been debating the best avenue for client apps to present help information to users.  The client applications I've written for <a href="http://shard.codecrate.com">shard</a> are built on <a href="http://spring-rich-c.sf.net">Spring Rich Client</a>, which has built in support for <a href="http://java.sun.com/products/javahelp/">JHelp</a> resources.  Now, maybe I'm missing something, but working with JHelp has been anything but <i>helpful.</i>  That's why I've decided to take a new direction to leverage the <a href="http://wiki.codecrate.com/display/SHA/User+Guide">shard project wiki for user help documentation</a>.  This feels like a perfect use of a wiki, and users never have to worry about "out of date" documentation.</p><br /><br /><p>I've rolled my own browser launcher for previous projects, but this time, I'm using the opensource <a href="http://www.centerkey.com/java/browser/">BareBonesBrowserLauncher</a>.  It's a lightweight version (~50 LOC) of the more robust <a href="http://browserlaunch2.sourceforge.net/">BrowserLauncher2</a> library and it's worth a shot until my requirements get more complex.<br /><br /></p><br /><br /><p>Here's a snapshot of the code, and the complete source can be found as part of the shard project.</p><br /><pre>public class BrowserLauncherCommand extends ApplicationWindowAwareCommand {<br />private String url;<br /><br />protected void doExecuteCommand() {<br />new BareBonesBrowserLauncher().openURL(url);<br />}<br />public String getUrl() {<br />return url;<br />}<br />public void setUrl(String url) {<br />this.url = url;<br />}<br /><br />/////////////////////////////////////////////////////////<br />//  Bare Bones Browser Launch                          //<br />//  Version 1.5                                        //<br />//  December 10, 2005                                  //<br />//  Supports: Mac OS X, GNU/Linux, Unix, Windows XP    //<br />//  Example Usage:                                     //<br />//     String url = "http://www.centerkey.com/";       //<br />//     BareBonesBrowserLaunch.openURL(url);            //<br />//  Public Domain Software -- Free to Use as You Like  //<br />/////////////////////////////////////////////////////////<br />public class BareBonesBrowserLauncher {<br />private static final String errMsg = "Error attempting to launch web browser";<br /><br />public void openURL(String url) {<br />String osName = System.getProperty("os.name");<br />try {<br />if (osName.startsWith("Mac OS")) {<br />Class fileMgr = Class.forName("com.apple.eio.FileManager");<br />Method openURL = fileMgr.getDeclaredMethod("openURL", new Class[] { String.class });<br />openURL.invoke(null, new Object[] { url });<br />} else if (osName.startsWith("Windows")) {<br />Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + url);<br />} else { //assume Unix or Linux<br />String[] browsers = new String[] {<br />"firefox",<br />"opera",<br />"konqueror",<br />"epiphany",<br />"mozilla",<br />"netscape" };<br />String browser = null;<br />for (int count = 0; count < browsers.length && browser == null; count++)<br />if (Runtime.getRuntime().exec(<br />new String[] { "which", browsers[count] })<br />.waitFor() == 0)<br />browser = browsers[count];<br />if (browser == null) {<br />throw new Exception("Could not find web browser");<br />} else {<br />Runtime.getRuntime().exec(new String[] { browser, url });<br />}<br />}<br />} catch (Exception e) {<br />JOptionPane.showMessageDialog(null, errMsg + ":\n" + e.getLocalizedMessage());<br />}<br />}<br />}<br />}<br /></pre>  <p>The Spring configuration is just a drop in replacement for the default <code>HelpContentsCommand</code></p><pre>&lt;bean id="helpContentsCommand"<br />class="com.codecrate.shard.ui.command.BrowserLauncherCommand"&gt;<br />&lt;property name="url"&gt;<br />&lt;value&gt;http://wiki.codecrate.com/display/SHA/User+Guide&lt;/value&gt;<br />&lt;/property&gt;<br />&lt;/bean&gt;<br /></pre>   This is another component could be useful to other spring-rich applications.  Anyone interested in integrating this into the core?  There are no external dependencies, so there shouldn't be too much fuss over allowing it in.   <!-- technorati tags begin --><p style="font-size:10px;text-align:right;">technorati tags:<a href="http://technorati.com/tag/java" rel="tag">java</a>, <a href="http://technorati.com/tag/spring" rel="tag">spring</a>, <a href="http://technorati.com/tag/rcp" rel="tag">rcp</a></p><!-- technorati tags end --></div>
