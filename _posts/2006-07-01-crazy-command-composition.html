---
layout: post
title: "Crazy Command Composition"
date: 2006-07-01
comments: false
categories:
 - java
 - spring
 - springrcp
---

<div class='post'>
<p>I'll send out a bright shiny new nickel to whoever can guess what this spring xml file is actually accomplishing.  :)</p><br /><br /><pre><br />  &lt;bean id="importDatasetCommand" class="com.codecrate.shard.ui.command.SpecificApplicationEventActionCommandExecutor"&gt;<br />    &lt;constructor-arg&gt;&lt;value&gt;com.codecrate.shard.ui.command.ImportDatasetEvent&lt;/value&gt;&lt;/constructor-arg&gt;<br />    &lt;constructor-arg&gt;<br />      &lt;bean class="com.codecrate.shard.ui.command.EventDispatcherThreadActionCommandExecutor"&gt;<br />        &lt;constructor-arg&gt;<br />          &lt;bean class="com.codecrate.shard.ui.command.ApplicationWindowProgressMonitorActionCommandExecutor"&gt;<br />            &lt;constructor-arg&gt;<br />              &lt;bean class="com.codecrate.shard.ui.command.FoxtrotBackgroundJobActionCommandExecutor"&gt;<br />                &lt;constructor-arg&gt;<br />                  &lt;bean class="com.codecrate.shard.ui.command.MethodInvokingActionCommandExecutor"&gt;<br />                    &lt;property name="targetObject"&gt;&lt;ref bean="importDatasetService"/&gt;&lt;/property&gt;<br />                    &lt;property name="targetMethod"&gt;&lt;value&gt;importDataset&lt;/value&gt;&lt;/property&gt;<br />                  &lt;/bean&gt;<br />                &lt;/constructor-arg&gt;<br />              &lt;/bean&gt;<br />            &lt;/constructor-arg&gt;<br />          &lt;/bean&gt;<br />        &lt;/constructor-arg&gt;<br />      &lt;/bean&gt;<br />    &lt;/constructor-arg&gt;<br />  &lt;/bean&gt;<br /></pre><br /><br /><p>I absolutely love the decorator pattern.  It promotes encapsulation of specific behavior into seperate classes.  The problem is that when trying to compose an object with multiple layers of functionality, it can get out of control (like above).  Usually, this is where a "factory" object is created to encapsulate complex object creation, but unfortunately for me, the above example can't be pushed into a factory helper.  Why?</p><br /><br /><p>First, the <code>SpecificApplicationEventActionCommandExecutor</code> implements the <code>ApplicationListener</code> interface.  Spring inspects the application context for classes that implement this functionality, which means this layer has to be defined in XML.</p><br /><br /><p>Next, the <code>ApplicationWindowProgressMonitorActionCommandExecutor</code> implements <code>ApplicationWindowAware</code> interface, which has the same issues as the <code>ApplicationListener</code> interface.</p><br /><br /><p>Hopefully I'll be able to encapsulate this functionality into some form of spring prototype block so that I can just inject my customized behavior into this whole stack of wrappers.</p><br /><br /><br /><!-- technorati tags begin --><br /><p style="font-size: 10px; text-align: right;">technorati tags: <br /><a href="http://technorati.com/tag/java" rel="tag">java</a>, <br /><a href="http://technorati.com/tag/spring" rel="tag">spring</a>, <br /><a href="http://technorati.com/tag/rcp" rel="tag">rcp</a><br /></p><br /><!-- technorati tags end --></div>
