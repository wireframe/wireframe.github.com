---
layout: post
title: "Wicket FeedPage"
date: 2006-12-30
comments: false
categories:
 - java
 - wicket
---

<div class='post'>
<p>Merry Christmas and a Happy New Year to all you folks out there.  Here's a <i>belated</i> Christmas gift for all you Wicket developers out there.</p><br /><br /><p>I've been adding RSS feeds to my Wicket application based on the example <a href="http://cwiki.apache.org/WICKET/rss-page.html">Wicket <code>RssPage</code> found on the wiki</a>, and thought it was very restrictive in what it could do.  There are a <i>ton</i> of Java libraries out there to build rss feeds, and this <code>RssPage</code> was <i>yet another</i> solution.</p><br /><br /><p>I wanted to leverage other libraries and avoid duplicating all of that markup in my own component, so I built a new <code>FeedPage</code> that uses the <a href="https://rome.dev.java.net/">Rome Java library</a> to take care of all the details.  Now I can handle any format of RSS or Atom, along with several media extensions without changing any markup files.  </p><br /><br /><pre><br />public abstract class FeedPage extends WebPage &#123;<br />  @Override<br />  public String getMarkupType() &#123;<br />    return "xml";<br />  &#125;<br /><br />  @Override<br />  protected final void onRender(MarkupStream markupStream) &#123;<br />    PrintWriter writer = new PrintWriter(getResponse().getOutputStream());<br />    SyndFeedOutput output = new SyndFeedOutput();<br />    try &#123;<br />      output.output(getFeed(), writer);<br />    &#125; catch (IOException e) &#123;<br />      throw new RuntimeException("Error streaming feed.", e);<br />    &#125; catch (FeedException e) &#123;<br />      throw new RuntimeException("Error streaming feed.", e);<br />    &#125;<br />  &#125;<br /><br />  protected abstract SyndFeed getFeed();<br />&#125;<br /></pre><br /><br /><p>Wicket requires a markup file for each page, so you'll need to create an empty FeedPage.xml file to go along with this page.</p><br /><br /><p>Now you can create your own page and get RSS or Atom feeds in Wicket!  This is a quick example of how to do it, and you'll probably want to take a look at the <a href="http://wiki.java.net/bin/view/Javawsxml/Rome05Tutorials">Rome tutorials for how to get more advanced stuff</a>.</p><br /><br /><pre><br />public class ItemFeedPage extends FeedPage &#123;<br /><br />  protected SyndFeed getFeed() &#123;<br />    SyndFeed feed = new SyndFeedImpl();<br />    feed.setFeedType("rss_2.0");<br />    feed.setTitle("Sample Feed");<br />    feed.setLink("http://mysite.com");<br />    feed.setDescription("Sample Feed for how cool Wicket is");<br /><br />    List&lt;SyndEntry&gt; entries = new ArrayList&lt;SyndEntry&gt;();<br />    SyndEntry entry;<br />    SyndContent description;<br /><br />    entry = new SyndEntryImpl();<br />    entry.setTitle("Article One");<br />    entry.setLink("http://mysite.com/article/one");<br />    entry.setPublishedDate(new Date());<br />    description = new SyndContentImpl();<br />    description.setType("text/plain");<br />    description.setValue("Article descriping how cool wicket is.");<br />    entry.setDescription(description);<br />    entries.add(entry);<br /><br />    feed.setEntries(entries);<br /><br />    return feed;<br />  &#125;<br />&#125;<br /></pre><br /><br /><p>Enjoy your gift everyone!  =)</p><br /><br /></div>
