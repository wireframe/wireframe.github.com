---
layout: post
title: "Template Versus Strategy Pattern"
date: 2006-01-05
comments: false
categories:
 - java
 - design
---

<div class='post'>
<p>Are you ready for a design pattern throw down?</p><br /><br /><p>I've been involved with a development reading group for the <a href="http://www.oreilly.com/catalog/hfdesignpat/">Head First Design Patterns</a> book.&nbsp; Overall, it's a really good book, and last night there was some interesting debate comparing the Template and Strategy patterns.&nbsp; Both pattern's intent is to push unique behavior into seperate objects.  My argument was that the Template pattern should be banished to the dark side of the moon since it forces use of class inheritance instead of object composition.</p><br /><br /><p>The template pattern defines the "hook" template methods for subclasses as protected.&nbsp; That means that in order to unit test the unique behavior, you have to test the main public entry point, which may have a considerable amount of setup/teardown overhead.  This makes testing what <i>really</i> matters more difficult than it should be.</p><br /><br /><p>Here's a simple example using Java psuedocode.&nbsp; Notice how in order for me to unit test the <code>importObject(String line)</code> method of my extension class, I have to unit test all of the file IO.&nbsp; It's a bit basic, but if that behavior was promoted to a strategy, you could unit test it without any file system dependencies.&nbsp; Something like <code>LineObjectImporter.importObject(String line)</code> would do just nicely.  +1 for testability!</p><br /><br /><pre class="code">public class AbstractFileImporter &#123;<br />public Collection importObjects(File file) &#123;<br />Collection results = new ArrayList();<br />InputReader input = new FileInputReader(file);<br />while (input.isActive()) &#123;<br />results.add(importObject(input.getLine()));<br />&#125; <br />input.close(); <br />return results;<br />&#125;<br />protected abstract Object importObject(String line); <br />&#125;<br /></pre><br /><br /><p>Although I favor the Strategy pattern, there does seem to be a quicker "up and running" time when using the template pattern.&nbsp; There's just something inherently easy (pun intended) about extending a parent class and only implementing a few methods.</p><br /><!-- technorati tags begin --><p style="font-size:10px;text-align:right;">technorati tags: <a href="http://technorati.com/tag/java" rel="tag">java</a>, <a href="http://technorati.com/tag/design" rel="tag">design</a></p><!-- technorati tags end --></div>
