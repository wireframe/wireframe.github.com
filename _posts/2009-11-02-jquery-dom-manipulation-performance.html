---
layout: post
title: "jQuery DOM Manipulation Performance"
date: 2009-11-02
comments: false
categories:
 - performance
 - jquery
---

<div class='post'>
Everyone says that "avoiding DOM manipulation" is a key to improve javascript performance, but their understanding of the root issue is slightly skewed.  In reality, manipulating elements is extremely fast <b>until</b>&nbsp;the element has been added to the DOM.  No need to throw away the wonderful append/prepend jQuery API's and drop down to the low level innerHtml tricks to get great performance.  Just make sure that you're manipulating element fragments <b>before</b> they're added to the DOM.<br /><br />The difference between these two blocks of code is subtle, but incredibly important.<br /><pre>//adds element to DOM and *then* does the manipulation<br />$('&lt;div /&gt;').appendTo(someElement).doSomeManipulation();<br /><br />//manipulates the element fragment *before* adding to the DOM<br />$('&lt;div /&gt;').doSomeManipulation().appendTo(someElement);<br /></pre><br />It's <b>extremely</b>&nbsp;important to be <i>aware</i>&nbsp;of when elements have been added to the DOM and <i>beware</i>&nbsp;manipulating elements once they are in place.<br /><br />You can make incredible improvements to your javascript performance by performing the majority of your work before adding your elements to the DOM.  By simply reordering your chain invocation, I've seen as much as a 10x improvement in javascript performance with this one technique (500 millis down to 50 millis after this change).<br /><br />This is not necessarily a global fix for all javascript performance issues.  There may be times when you actually need the element inserted into the DOM before doing more work (ex: embedding flash content), but it's worth a shot to see if this approach works with your application!</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>dontcare</div>
<div class='content'>
You may want to look at vtd-xml as the state of the art in XML processing, consuming far less memory than DOM<br /><br /><a href="http://vtd-xml.sf.net" rel="nofollow">vtd-xml</a></div>
</div>
</div>
